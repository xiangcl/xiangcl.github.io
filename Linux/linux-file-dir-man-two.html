<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="GMsZTqIe9hTE0zeMQRvithqQtn6iRgHbqVH21JfYNEs" />










  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lato:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Linux,Linux基础," />





  <link rel="alternate" href="/atom.xml" title="向常乐的Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="文件和目录的默认权限与隐藏权限文件默认权限： umaskumask：指定目前使用者在创建文件或目录时的权限默认值。
1234567891011[xiangcl@centos-rpi3 ~]$ umask0002                                # 与一般权限有关是后三位数字[xiangcl@centos-rpi3 ~]$ umask -Su=rwx,g=rwx,o=r">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux文件与目录管理2">
<meta property="og:url" content="http://xiangcl.com/Linux/linux-file-dir-man-two.html">
<meta property="og:site_name" content="向常乐的Blog">
<meta property="og:description" content="文件和目录的默认权限与隐藏权限文件默认权限： umaskumask：指定目前使用者在创建文件或目录时的权限默认值。
1234567891011[xiangcl@centos-rpi3 ~]$ umask0002                                # 与一般权限有关是后三位数字[xiangcl@centos-rpi3 ~]$ umask -Su=rwx,g=rwx,o=r">
<meta property="og:image" content="http://xiangclimg-10066880.cos.myqcloud.com/find1.png">
<meta property="og:image" content="http://xiangclimg-10066880.cos.myqcloud.com/find2.png">
<meta property="og:updated_time" content="2017-05-18T09:02:42.514Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux文件与目录管理2">
<meta name="twitter:description" content="文件和目录的默认权限与隐藏权限文件默认权限： umaskumask：指定目前使用者在创建文件或目录时的权限默认值。
1234567891011[xiangcl@centos-rpi3 ~]$ umask0002                                # 与一般权限有关是后三位数字[xiangcl@centos-rpi3 ~]$ umask -Su=rwx,g=rwx,o=r">
<meta name="twitter:image" content="http://xiangclimg-10066880.cos.myqcloud.com/find1.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://xiangcl.com/Linux/linux-file-dir-man-two.html"/>


  <title> Linux文件与目录管理2 | 向常乐的Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-86793462-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?2f2c82bc4fe99249065382469fb4a3d1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=59276703";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">向常乐的Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">知足者 常乐也！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Linux文件与目录管理2
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-18T17:02:42+08:00" content="2017-05-18">
              2017-05-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="文件和目录的默认权限与隐藏权限"><a href="#文件和目录的默认权限与隐藏权限" class="headerlink" title="文件和目录的默认权限与隐藏权限"></a>文件和目录的默认权限与隐藏权限</h2><h3 id="文件默认权限：-umask"><a href="#文件默认权限：-umask" class="headerlink" title="文件默认权限： umask"></a>文件默认权限： umask</h3><p>umask：指定目前使用者在创建文件或目录时的权限默认值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[xiangcl@centos-rpi3 ~]$ umask</div><div class="line">0002                                # 与一般权限有关是后三位数字</div><div class="line">[xiangcl@centos-rpi3 ~]$ umask -S</div><div class="line">u=rwx,g=rwx,o=rx</div><div class="line">[xiangcl@centos-rpi3 ~]$ su -</div><div class="line">密码：</div><div class="line">上一次登录：一 11月 14 05:53:08 UTC 2016pts/0 上</div><div class="line">[root@centos-rpi3 ~]# umask</div><div class="line">0022                                # 基于安全的考量， root默认的是022</div><div class="line">[root@centos-rpi3 ~]# umask -S</div><div class="line">u=rwx,g=rx,o=rx</div></pre></td></tr></table></figure>
<p><em>Note：umask的第一组数字是特殊权限使用。</em></p>
<p>在默认权限的属性上，目录与文件是不一样的。x 权限对于目录是非常重要的！ 但是一般文件的创建则不应该有执行的权限，因为一般文件通常是用在于数据的记录嘛！当然不需要执行的权限了。 因此，默认的情况如下：</p>
<ul>
<li><p>若使用者创建为“文件”则默认“没有可执行（x ） 权限”，亦即只有 rw 这两个项目，也就是最大为 666 分，默认权限如下： -rw-rw-rw-</p>
</li>
<li><p>若使用者创建为“目录”，则由于 x 与是否可以进入此目录有关，因此默认为所有权限均开放，亦即为 777 分，默认权限如下： drwxrwxrwx</p>
</li>
</ul>
<p>因为 umask 为 022 ，所以 user 并没有被拿掉任何权限，不过 group 与 others 的权限被拿掉了 2 （ 也就是 w 这个权限） ，那么当使用者：</p>
<ul>
<li>创建文件时：（ -rw-rw-rw-） - （ —–w–w-） ==&gt; -rw-r–r–</li>
<li>创建目录时：（ drwxrwxrwx） - （ d—-w–w-） ==&gt; drwxr-xr-x</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos-rpi3 ~]# umask</div><div class="line">0022</div><div class="line">[root@centos-rpi3 ~]# touch test1</div><div class="line">[root@centos-rpi3 ~]# mkdir test2</div><div class="line">[root@centos-rpi3 ~]# ll -d test*</div><div class="line">-rw-r--r--. 1 root root    0 11月 14 06:04 test1</div><div class="line">drwxr-xr-x. 2 root root 4096 11月 14 06:04 test2</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">umask #   :     设定</div><div class="line"></div><div class="line">范例一：修改默认的 umask 的值</div><div class="line">[root@centos-rpi3 ~]# umask 002</div><div class="line">[root@centos-rpi3 ~]# touch test3</div><div class="line">[root@centos-rpi3 ~]# mkdir test4</div><div class="line">[root@centos-rpi3 ~]# ll -d test[34]</div><div class="line">-rw-rw-r--. 1 root root    0 11月 14 06:10 test3</div><div class="line">drwxrwxr-x. 2 root root 4096 11月 14 06:10 test4</div></pre></td></tr></table></figure>
<p><em>Note： umask对于新建文件与目录的默认权限是很重要的</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">例题：假设你的 umask 为003，请问该 umask 情况下，创建的文件和目录的权限为？</div><div class="line"></div><div class="line">umask 为 003</div><div class="line">所以拿掉的权限为：</div><div class="line">--------wx</div><div class="line"></div><div class="line">文件：</div><div class="line">-rw-rw-rw-</div><div class="line">-</div><div class="line">--------wx</div><div class="line">=</div><div class="line">-rw-rw-r--</div><div class="line"></div><div class="line">目录：</div><div class="line">drwxrwxrwx</div><div class="line">-</div><div class="line">d-------wx</div><div class="line">=</div><div class="line">drwxrwxr--</div></pre></td></tr></table></figure>
<h3 id="文件隐藏属性"><a href="#文件隐藏属性" class="headerlink" title="文件隐藏属性"></a>文件隐藏属性</h3><p><em>下面的 chattr 指令只能在Ext2/Ext3/Ext4 的Linux传统文件系统上面完整的生效，其它文件系统不能完整支持。</em></p>
<h4 id="chattr-（设置文件隐藏属性）"><a href="#chattr-（设置文件隐藏属性）" class="headerlink" title="chattr （设置文件隐藏属性）"></a>chattr （设置文件隐藏属性）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"> chattr [ -RV ] [ -v version ] [ mode ] files...</div><div class="line">OPTION：</div><div class="line">选项与参数：</div><div class="line">+ ：增加某一个特殊参数，其他原本存在参数则不动。</div><div class="line">- ：移除某一个特殊参数，其他原本存在参数则不动。</div><div class="line">= ：设置一定，且仅有后面接的参数</div><div class="line"></div><div class="line">A ：当设置了 A 这个属性时，若你有存取此文件（ 或目录） 时，他的存取时间 atime 将不会被修改，</div><div class="line">可避免 I/O 较慢的机器过度的存取磁盘。（ 目前建议使用文件系统挂载参数处理这个项目）</div><div class="line">S ：一般文件是非同步写入磁盘的（ 原理请参考[前一章sync](../Text/index.html#sync)的说明） ，如果加上 S 这个属性时，</div><div class="line">当你进行任何文件的修改，该更动会“同步”写入磁盘中。</div><div class="line">a ：当设置 a 之后，这个文件将只能增加数据，而不能删除也不能修改数据，只有root 才能设置这属性</div><div class="line">c ：这个属性设置之后，将会自动的将此文件“压缩”，在读取的时候将会自动解压缩，</div><div class="line">但是在储存的时候，将会先进行压缩后再储存（ 看来对于大文件似乎蛮有用的！）</div><div class="line">d ：当 dump 程序被执行的时候，设置 d 属性将可使该文件（ 或目录） 不会被 dump 备份</div><div class="line">i ：这个 i 可就很厉害了！他可以让一个文件“不能被删除、改名、设置链接也无法写入或新增数据！”</div><div class="line">对于系统安全性有相当大的助益！只有 root 能设置此属性</div><div class="line">s ：当文件设置了 s 属性时，如果这个文件被删除，他将会被完全的移除出这个硬盘空间，</div><div class="line">所以如果误删了，完全无法救回来了喔！</div><div class="line">u ：与 s 相反的，当使用 u 来设置文件时，如果该文件被删除了，则数据内容其实还存在磁盘中，</div><div class="line">可以使用来救援该文件喔！</div><div class="line">注意1：属性设置常见的是 a 与 i 的设置值，而且很多设置值必须要身为 root 才能设置</div><div class="line">注意2：xfs 文件系统仅支持 AadiS 而已</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">范例一：尝试在 /tmp 下创建文件，并加入 i 的参数，然后删除看看</div><div class="line">[root@centos-rpi3 ~]# cd /tmp/</div><div class="line">[root@centos-rpi3 tmp]# ls</div><div class="line">[root@centos-rpi3 tmp]# touch attrtest</div><div class="line">[root@centos-rpi3 tmp]# chattr +i attrtest</div><div class="line">[root@centos-rpi3 tmp]# rm attrtest</div><div class="line">rm：是否删除普通空文件 &quot;attrtest&quot;？y</div><div class="line">rm: 无法删除&quot;attrtest&quot;: 不允许的操作</div><div class="line"># 是不是无法删除？</div><div class="line"></div><div class="line"># 取消 -i 属性又能删除了</div><div class="line">[root@centos-rpi3 tmp]# chattr -i attrtest</div><div class="line">[root@centos-rpi3 tmp]# rm attrtest</div><div class="line">rm：是否删除普通空文件 &quot;attrtest&quot;？y</div></pre></td></tr></table></figure>
<h4 id="lsattr-（显示文件隐藏属性）"><a href="#lsattr-（显示文件隐藏属性）" class="headerlink" title="lsattr     （显示文件隐藏属性）"></a>lsattr     （显示文件隐藏属性）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">lsattr [ -RVadv ] [ files...  ]</div><div class="line">OPTION:</div><div class="line">-a ：将隐藏文件的属性也秀出来；</div><div class="line">-d ：如果接的是目录，仅列出目录本身的属性而非目录内的文件名；</div><div class="line">-R ：连同子目录的数据也一并列出来！</div><div class="line"></div><div class="line">[root@centos-rpi3 tmp]# chattr +aiS attrtest</div><div class="line">[root@centos-rpi3 tmp]# lsattr attrtest</div><div class="line">--S-ia-------e-- attrtest</div></pre></td></tr></table></figure>
<h3 id="文件特殊权限：SUID，SGIG-SBIT"><a href="#文件特殊权限：SUID，SGIG-SBIT" class="headerlink" title="文件特殊权限：SUID，SGIG, SBIT"></a>文件特殊权限：SUID，SGIG, SBIT</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos-rpi3 tmp]# ls -ld /tmp; ls -l /usr/bin/passwd</div><div class="line">drwxrwxrwt. 7 root root 4096 11月 14 06:38 /tmp</div><div class="line">-rwsr-xr-x. 1 root root 27236 5月  23 2015 /usr/bin/passwd</div></pre></td></tr></table></figure>
<p>权限里竟然冒出了 t 和 s。</p>
<h4 id="Set-UID"><a href="#Set-UID" class="headerlink" title="Set UID"></a>Set UID</h4><p>当 s 这个标志出现在文件拥有者的 x 权限上时，例如刚刚提到的 /usr/bin/passwd 这个文件的权限状态：“-rwsr-xr-x”，此时就被称为 Set UID，简称为 SUID 的特殊权限。 那么SUID的权限对于一个文件的特殊功能是什么呢？基本上SUID有这样的限制与功能：</p>
<ul>
<li>SUID 权限仅对二进制程序（ binary program） 有效；</li>
<li>执行者对于该程序需要具有 x 的可执行权限；</li>
<li>本权限仅在执行该程序的过程中有效 （ run-time） ；</li>
<li>执行者将具有该程序拥有者 （ owner） 的权限。</li>
</ul>
<p>例：我们的 Linux 系统中，所有帐号的密码都记录在 /etc/shadow 这个文件里面，这个文件的权限为：“———- 1 root root”，意思是这个文件仅有root可读且仅有root可以强制写入而已。既然这个文件仅有 root 可以修改，那么自己的帐号这种一般帐号使用者能否自行修改自己的密码呢？ 你可以使用你自己的帐号输入“passwd”这个指令来看看。一般使用者当然可以修改自己的密码了！</p>
<p><em>SUID对目录无效</em></p>
<h4 id="Set-GID"><a href="#Set-GID" class="headerlink" title="Set GID"></a>Set GID</h4><p>默认情况下，用户创建文件时，其属组为此用户所属的基本组；</p>
<p>一旦某目录被设定了SGID，则对此目录有写权限的用户在此目录中创建的文件所属的组为此目录的属组；</p>
<p>权限设定：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chmod g+s DIR...</div><div class="line">chmod g-s DIR...</div></pre></td></tr></table></figure></p>
<p>对文件来说，SGID有如下功能：</p>
<ul>
<li>SGID 对二进制程序有用；</li>
<li>程序执行者对于该程序来说，需具备 x 的权限；</li>
<li>执行者在执行的过程中将会获得该程序群组的支持！</li>
</ul>
<p>对目录来说，SGID有如下功能：</p>
<ul>
<li>使用者若对于此目录具有 r 与 x 的权限时，该使用者能够进入此目录；</li>
<li>使用者在此目录下的有效群组（ effective group） 将会变成该目录的群组；</li>
<li>用途：若使用者在此目录下具有 w 的权限（ 可以新建文件） ，则使用者所创建的新文件，该新文件的群组与此目录的群组相同。</li>
</ul>
<h4 id="Sticky"><a href="#Sticky" class="headerlink" title="Sticky"></a>Sticky</h4><p>SBIT 目前只针对目录有效，对于文件已经没有效果了。SBIT 对于目录的作用是：</p>
<ul>
<li>当使用者对于此目录具有 w, x 权限，亦即具有写入的权限时；</li>
<li>当使用者在该目录下创建文件或目录时，仅有自己与 root 才有权力删除该文件</li>
</ul>
<p>对于一个多人可写的目录，如果设置了sticky，则每个用户仅能删除自己的文件；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">权限设定：</div><div class="line">	chmod o+t DIR...</div><div class="line">	chmod o-t DIR...</div><div class="line"></div><div class="line">SUID SGID STICKY</div><div class="line">	000 0</div><div class="line">	001 1</div><div class="line">	010 2</div><div class="line">	011 3</div><div class="line">	100 4</div><div class="line">	101 5</div><div class="line">	110 6</div><div class="line">	111 7</div><div class="line"></div><div class="line">	chmod 4777 /tmp/a.txt</div><div class="line"></div><div class="line">几个权限位映射：</div><div class="line">	SUID: user, 占据属主的执行权限位；</div><div class="line">		s: 属主拥有x权限</div><div class="line">		S：属主没有x权限</div><div class="line">	SGID: group,  占据group的执行权限位；</div><div class="line">		s: group拥有x权限</div><div class="line">		S：group没有x权限</div><div class="line">	Sticky: other, 占据ohter的执行权限位；</div><div class="line">		t: other拥有x权限</div><div class="line">		T：other没有x权限</div></pre></td></tr></table></figure>
<h2 id="指令与文件的搜索"><a href="#指令与文件的搜索" class="headerlink" title="指令与文件的搜索"></a>指令与文件的搜索</h2><h3 id="指令文件名的搜索"><a href="#指令文件名的搜索" class="headerlink" title="指令文件名的搜索"></a>指令文件名的搜索</h3><p>在终端机模式当中，连续输入两次[tab]按键就能够知道使用者有多少指令可以下达。那你知不知道这些指令的完整文件名放在哪里？</p>
<h4 id="which-（搜索“可执行文件”）"><a href="#which-（搜索“可执行文件”）" class="headerlink" title="which      （搜索“可执行文件”）"></a>which      （搜索“可执行文件”）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">which [options] [--] programname [...]</div><div class="line">OPTIONS:</div><div class="line">-a, --all</div><div class="line">    将所有由 PATH 目录中可以找到的指令均列出，而不止第一个被找到的指令名称</div><div class="line">--skip-alias:</div><div class="line">    禁止显示别名</div><div class="line"></div><div class="line"></div><div class="line">范例一：搜索 ifconfig 这个指令的完整文件名</div><div class="line">[root@centos-rpi3 tmp]# which ifconfig</div><div class="line">/sbin/ifconfig</div><div class="line"></div><div class="line">范例二：用 which 去找出 which 的文件名</div><div class="line">[root@centos-rpi3 tmp]# which which</div><div class="line">alias which=&apos;alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde&apos;</div><div class="line">	/bin/alias</div><div class="line">	/usr/bin/which</div><div class="line"># alias 是命令别名</div><div class="line"></div><div class="line">范例三：请找出 history 这个指令的完整文件名</div><div class="line">[root@centos-rpi3 tmp]# which history</div><div class="line">/usr/bin/which: no history in (/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin)</div><div class="line"># history是“bash内置的指令”，但是 which 默认是找 PATH 内所规范的目录。所以当然搜寻不到</div></pre></td></tr></table></figure>
<p>这个命令是根据 “PATH” 这个环境变量所规范的路径，去搜索“可执行文件”的文件名。</p>
<h3 id="文件、文件名的搜索"><a href="#文件、文件名的搜索" class="headerlink" title="文件、文件名的搜索"></a>文件、文件名的搜索</h3><p>搜索文件时 find 不很常用，因为速度慢之外，也很损耗硬盘。一般我们都是先使用whereis 或者是 locate 来检查，如果真的找不到了，才以 find 来搜寻。whereis 只找系统中某些特定目录下面的文件而已，locate 则是利用数据库来搜寻文件名，当然两者就相当的快速， 并且没有实际的搜寻硬盘内的文件系统状态，比较省时间。</p>
<h4 id="whereis-（由一些特定的目录中寻找文件、文件名）"><a href="#whereis-（由一些特定的目录中寻找文件、文件名）" class="headerlink" title="whereis        （由一些特定的目录中寻找文件、文件名）"></a>whereis        （由一些特定的目录中寻找文件、文件名）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">whereis [options] [-BMS directory... -f] name...</div><div class="line">OPTION:</div><div class="line">-l :可以列出 whereis 会去查询的几个主要目录而已</div><div class="line">-b :只找 binary 格式的文件</div><div class="line">-m :只找在说明文档 manual 路径下的文件</div><div class="line">-s :只找 source 来源文件</div><div class="line">-u :搜寻不在上述三个项目当中的其他特殊文件</div><div class="line"></div><div class="line">范例一：请找出 ifconfig 这个文件名</div><div class="line">[root@centos-rpi3 tmp]# whereis ifconfig</div><div class="line">ifconfig: /usr/sbin/ifconfig /usr/share/man/man8/ifconfig.8.gz</div><div class="line"></div><div class="line">范例二：只找出跟 passwd 有关的“说明文档”文件名 （man page）</div><div class="line">[root@centos-rpi3 tmp]# whereis passwd      # 列出全部的文件名</div><div class="line">passwd: /usr/bin/passwd /etc/passwd /usr/share/man/man1/passwd.1.gz</div><div class="line">[root@centos-rpi3 tmp]# whereis -m passwd   # 只有在 man 里面的文件名才列出来</div><div class="line">passwd: /usr/share/man/man1/passwd.1.gz</div></pre></td></tr></table></figure>
<p><em>whereis 主要是针对 /bin /sbin 下面的可执行文件， 以及 /usr/share/man 下面的 man page 文件，跟几个比较特定的目录来处理</em></p>
<p><em>要知道 whereis 到底查了多少目录？可以使用 whereis -l 来查看。</em></p>
<h4 id="locate-updatedb"><a href="#locate-updatedb" class="headerlink" title="locate / updatedb"></a>locate / updatedb</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">locate  -   按名称查找文件</div><div class="line"></div><div class="line"> locate [OPTION]... PATTERN...</div><div class="line"></div><div class="line">OPTION：</div><div class="line">-i，--ignore-case</div><div class="line">    忽略大小写的差异；</div><div class="line">-c，--count</div><div class="line">    不输出文件名，仅计算找到的文件数量</div><div class="line">-l， --limit, -n LIMIT</div><div class="line">    仅输出几行的意思，例如输出五行则是 -l 5</div><div class="line">-S，, --statistics</div><div class="line">    输出 locate 所使用的数据库文件的相关信息，包括该数据库纪录的文件/目录数量等</div><div class="line">-r，--regexp REGEXP</div><div class="line">    后面可接正则表达式的显示方式</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">范例一：找出系统中所有与 passwd 相关的文件名，且只列出5个</div><div class="line">[xiangcl@VM_0_26_centos ~]$ locate -l 5 passwd</div><div class="line">/etc/passwd</div><div class="line">/etc/passwd-</div><div class="line">/etc/pam.d/passwd</div><div class="line">/etc/security/opasswd</div><div class="line">/root/node-v6.2.0/deps/openssl/openssl/apps/passwd.c</div><div class="line"></div><div class="line">范例二：列出 locate 查询所使用的数据库文件之文件名与各数据数量</div><div class="line">[xiangcl@VM_0_26_centos ~]$ locate -S</div><div class="line">数据库 /var/lib/mlocate/mlocate.db:</div><div class="line">	18,507 文件夹                     # 总记录目录数</div><div class="line">	120,727 文件                      # 总记录文件数</div><div class="line">	7,442,050 文件名中的字节数</div><div class="line">	2,959,140 字节用于存储数据库</div></pre></td></tr></table></figure>
<p><em>忘记某个文件的完整文件名时，可以使用locate</em></p>
<p><em>locate 寻找的数据是由“已创建的数据库 /var/lib/mlocate/” 里面的数据所搜寻到的，所以不用直接在去硬盘当中存取数据</em></p>
<p><em>使用locate会有限制，因为他是经由数据库来搜寻的，而数据库的创建默认是在每天执行一次 （ 每个 distribution 都不同，CentOS 7.x 是每天更新数据库一次！） ，所以当你新创建起来的文件， 却还在数据库更新之前搜寻该文件，那么 locate 会告诉你“找不到！”。因为必须更新数据库</em></p>
<p><em>更新 locate 数据库的方法非常简单，直接输入“updatedb ”就可以了！ updatedb 指令会去读取 /etc/updatedb.conf 这个配置文件的设置，然后再去硬盘里面进行搜寻文件名的动作， 最后就更新整个数据库文件啰！因为 updatedb 会去搜寻硬盘，所以当你执行 updatedb 时，可能会等待数分钟的时间喔！</em></p>
<h5 id="执行步骤"><a href="#执行步骤" class="headerlink" title="执行步骤"></a>执行步骤</h5><ul>
<li>updatedb：根据 /etc/updatedb.conf 的设置去搜寻系统硬盘内的文件名，并更新<br>/var/lib/mlocate 内的数据库文件；</li>
<li>locate：依据 /var/lib/mlocate 内的数据库记载，找出使用者输入的关键字文件名。</li>
</ul>
<h4 id="find-递归地在层次目录中处理文件"><a href="#find-递归地在层次目录中处理文件" class="headerlink" title="find   (递归地在层次目录中处理文件)"></a>find   (递归地在层次目录中处理文件)</h4><p>概述：实事查找工具，通过便利指定路径下的文件系统完成文件查找</p>
<p>特点：</p>
<ul>
<li>查找速度略慢</li>
<li>精确查找</li>
<li>实事查找</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">find [OPTION]... [查找路径] [查找条件] [处理动作]</div><div class="line">    查找路径： 指定具体目标路径；默认为当前目录；</div><div class="line">    查找条件： 指定的查找标准，可以文件名、大小、类型、权限等标准进行；默认为找出指定路径下的所有文件；</div><div class="line">    处理动作： 对符合条件的文件做什么操作；默认输出至屏幕；</div><div class="line"></div><div class="line">查找条件：</div><div class="line">    根据文件名查找：</div><div class="line">        -name “文件名”</div><div class="line">        -iname “文件名”：不区分字母大小写</div><div class="line">        -regex &quot;PATTERN&quot;：以PATTERN（文件名与正则表达式）匹配整个文件路径字符串，而不仅仅是文件名称；</div><div class="line"></div><div class="line">    根据属主、属组查找：</div><div class="line">    	-user USERNAME：查找属主为指定用户的文件；</div><div class="line">    	-group GRPNAME: 查找属组为指定组的文件；</div><div class="line"></div><div class="line">    	-uid UserID：查找属主为指定的UID号的文件；</div><div class="line">    	-gid GroupID：查找属组为指定的GID号的文件；</div><div class="line"></div><div class="line">    	-nouser：查找没有属主的文件；</div><div class="line">    	-nogroup：查找没有属组的文件；</div><div class="line"></div><div class="line">    根据文件类型查找：</div><div class="line">		-type TYPE:</div><div class="line">			f: 普通文件</div><div class="line">			d: 目录文件</div><div class="line">			l: 符号链接文件</div><div class="line">			s：套接字文件</div><div class="line">			b: 块设备文件</div><div class="line">			c: 字符设备文件</div><div class="line">			p: 管道文件</div><div class="line"></div><div class="line">	组合条件：</div><div class="line">		与：-a</div><div class="line">		或：-o</div><div class="line">		非：-not, !</div><div class="line"></div><div class="line">		!A -a !B = !(A -o B)</div><div class="line">		!A -o !B = !(A -a B)</div><div class="line"></div><div class="line">		范例：找出/tmp目录下，属主不是root，且文件名不是fstab的文件；</div><div class="line">			find /tmp \( -not -user root -a -not -name &apos;fstab&apos; \) -ls</div><div class="line">			find /tmp -not \( -user root -o -name &apos;fstab&apos; \) -ls</div><div class="line">            # 加上 -ls ，是查找并显示结果</div><div class="line"></div><div class="line">	根据文件大小来查找：(示意图如下：find指令文件大小范围示意图)</div><div class="line">		-size [+|-]#UNIT</div><div class="line">			常用单位：k, M, G</div><div class="line"></div><div class="line">			#UNIT: (#-1, #]</div><div class="line">			-#UNIT：[0,#-1]</div><div class="line">			+#UNIT：(#,oo)</div><div class="line"></div><div class="line">	根据时间戳：(示意图如下：find指令时间戳范围示意图)</div><div class="line">		以“天”为单位；</div><div class="line">			-atime [+|-]#,</div><div class="line">				#: [#,#+1)</div><div class="line">				+#: [#+1,oo]</div><div class="line">				-#: [0,#)</div><div class="line">			-mtime</div><div class="line">			-ctime</div><div class="line"></div><div class="line">		以“分钟”为单位：</div><div class="line">			-amin</div><div class="line">			-mmin</div><div class="line">			-cmin</div><div class="line"></div><div class="line">	根据权限查找：</div><div class="line">		-perm [/|-]MODE</div><div class="line">			MODE: 精确权限匹配</div><div class="line">			/MODE：任何一类(u,g,o)对象的权限中只要能一位匹配即可；</div><div class="line">			-MODE：每一类对象都必须同时拥有为其指定的权限标准；</div><div class="line"></div><div class="line">处理动作：</div><div class="line">	-print：默认的处理动作，显示至屏幕；</div><div class="line">	-ls：类似于对查找到的文件执行“ls -l”命令；</div><div class="line">	-delete：删除查找到的文件；</div><div class="line">	-fls /path/to/somefile：查找到的所有文件的长格式信息保存至指定文件中；</div><div class="line">	-ok COMMAND &#123;&#125; \; 对查找到的每个文件执行由COMMAND指定的命令；</div><div class="line">		对于每个文件执行命令之前，都会交互式要求用户确认；</div><div class="line">	-exec COMMAND &#123;&#125; \; 对查找到的每个文件执行由COMMAND指定的命令;</div><div class="line">		&#123;&#125;: 用于引用查找到的文件名称自身；</div><div class="line"></div><div class="line">	注意：find传递查找到的文件至后面指定的命令时，查找到所有符合条件的文件一次性传递给后面的命令；</div><div class="line">	有些命令不能接受过多参数，此时命令执行可能会失败；另一种方式可规避此问题：</div><div class="line">		find | xargs COMMAND</div><div class="line"></div><div class="line">范例一：将过去系统上24小时内有更动过内容（mtime）的文件列出</div><div class="line">[root@centos-rpi3 ~]# find / -mtime 0</div><div class="line"># 那个 0 是重点！0 代表目前的时间，所以，从现在开始到 24 小时前，</div><div class="line"># 有变动过内容的文件都会被列出来！那如果是三天前呢？</div><div class="line"># find / -mtime 3 有变动过的文件都被列出的意思！</div><div class="line"></div><div class="line">范例二：寻找 /etc 下面的文件，如果文件日期比 /etc/passwd 新就列出</div><div class="line">[root@centos-rpi3 ~]# find /etc -newer /etc/passwd</div><div class="line"># -newer 用在分辨两个文件之间的新旧关系是很有用的。</div></pre></td></tr></table></figure>
<h5 id="find指令文件大小范围示意图"><a href="#find指令文件大小范围示意图" class="headerlink" title="find指令文件大小范围示意图"></a>find指令文件大小范围示意图</h5><p><img src="http://xiangclimg-10066880.cos.myqcloud.com/find1.png" alt=""></p>
<h5 id="find指令时间戳范围示意图"><a href="#find指令时间戳范围示意图" class="headerlink" title="find指令时间戳范围示意图"></a>find指令时间戳范围示意图</h5><p><img src="http://xiangclimg-10066880.cos.myqcloud.com/find2.png" alt=""></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag">#Linux</a>
          
            <a href="/tags/Linux基础/" rel="tag">#Linux基础</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/tool-config/yum-centos-package-tool.html" rel="next" title="yum:CentOS包管理工具">
                <i class="fa fa-chevron-left"></i> yum:CentOS包管理工具
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/tool-config/god-editor-vim.html" rel="prev" title="编辑器之神-VIM">
                编辑器之神-VIM <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/touxiang.jpg"
               alt="向常乐" />
          <p class="site-author-name" itemprop="name">向常乐</p>
          <p class="site-description motion-element" itemprop="description">向常乐的个人Blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/xiangcl" target="_blank" rel="external nofollow"  title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/xiangcle" target="_blank" rel="external nofollow"  title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://segmentfault.com/u/xiangcl" title="Segmentfault" target="_blank">Segmentfault</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件和目录的默认权限与隐藏权限"><span class="nav-number">1.</span> <span class="nav-text">文件和目录的默认权限与隐藏权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文件默认权限：-umask"><span class="nav-number">1.1.</span> <span class="nav-text">文件默认权限： umask</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件隐藏属性"><span class="nav-number">1.2.</span> <span class="nav-text">文件隐藏属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chattr-（设置文件隐藏属性）"><span class="nav-number">1.2.1.</span> <span class="nav-text">chattr （设置文件隐藏属性）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lsattr-（显示文件隐藏属性）"><span class="nav-number">1.2.2.</span> <span class="nav-text">lsattr     （显示文件隐藏属性）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件特殊权限：SUID，SGIG-SBIT"><span class="nav-number">1.3.</span> <span class="nav-text">文件特殊权限：SUID，SGIG, SBIT</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Set-UID"><span class="nav-number">1.3.1.</span> <span class="nav-text">Set UID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Set-GID"><span class="nav-number">1.3.2.</span> <span class="nav-text">Set GID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sticky"><span class="nav-number">1.3.3.</span> <span class="nav-text">Sticky</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令与文件的搜索"><span class="nav-number">2.</span> <span class="nav-text">指令与文件的搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#指令文件名的搜索"><span class="nav-number">2.1.</span> <span class="nav-text">指令文件名的搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#which-（搜索“可执行文件”）"><span class="nav-number">2.1.1.</span> <span class="nav-text">which      （搜索“可执行文件”）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件、文件名的搜索"><span class="nav-number">2.2.</span> <span class="nav-text">文件、文件名的搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#whereis-（由一些特定的目录中寻找文件、文件名）"><span class="nav-number">2.2.1.</span> <span class="nav-text">whereis        （由一些特定的目录中寻找文件、文件名）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locate-updatedb"><span class="nav-number">2.2.2.</span> <span class="nav-text">locate / updatedb</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#执行步骤"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">执行步骤</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#find-递归地在层次目录中处理文件"><span class="nav-number">2.2.3.</span> <span class="nav-text">find   (递归地在层次目录中处理文件)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#find指令文件大小范围示意图"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">find指令文件大小范围示意图</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#find指令时间戳范围示意图"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">find指令时间戳范围示意图</span></a></li></ol></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">向常乐</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io" rel="external nofollow">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  


</body>
</html>
